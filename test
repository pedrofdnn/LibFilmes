searchTerm: string
): Promise<Movie[]> => {
  const allResults: Movie[] = [];
  const maxPages = 40; // Defina o número máximo de páginas a serem buscadas
  let currentPage = 1;

  try {
    for (currentPage = 1; currentPage <= maxPages; currentPage++) {
      const response = await axios.get(`${BASE_URL}/search/movie${LANGUAGE}`, {
        params: {
          api_key: API_KEY,
          query: searchTerm,
          page: currentPage,
        },
      });

      const { results, total_pages } = response.data;
      allResults.push(...results);

      // Se não houver mais resultados ou atingiu o limite de páginas, saia do loop
      if (currentPage >= total_pages || currentPage >= maxPages) {
        break;
      }
    }

    return allResults;
  } catch (error) {
    console.error("Erro de Busca na API", error);
    throw error;
  }